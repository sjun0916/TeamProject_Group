<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 맵핑될 DAO 인터페이스의 name 을 줍니다. -->
<!-- <mapper namespace="CalendarDao"> -->
	<!-- id 속성은 DAO 의 메소드와 같아야 한다. 여기의 memberVO 는 Mybatis-confg.xml 에 Alias 되어있습니다. -->
	
	<!-- 등록된 전체 일정 목록 보기 -->
<!-- 	<select id="viewList" resultType="CalendarVO"> -->
<!-- 	select * from CALENDAR -->
<!-- 	order by CALENDARNUM -->
<!-- 	</select> -->
	
	<!-- 선택한 일정 보기 -->
<!-- 	<select id="select" parameterType="int" resultType="CalendarVO"> -->
<!-- 	select * from CALENDAR -->
<!-- 	where CALENDARNUM = #{CALENDARNUM} -->
<!-- 	</select> -->
	
	<!-- 일정 등록 -->
<!-- 	<insert id="insert" parameterType="CalendarVO"> -->
<!-- 	insert into CALENDAR -->
<!-- 	(CALENDARNUM, EMPLOYEE_NO, STARTDATE, ENDDATE, TITLE, CONTENT, KIND) -->
<!-- 	</insert> -->
	<!--일정 수정 -->
<!-- 	<update id="update" parameterType="CalendarVO"> -->
<!-- 	update CALENDAR set STARTDATE=#{STARTDATE}, ENDDATE=#{ENDDATE}, TITLE=#{TITLE},  -->
<!-- 	CONTENT=#{CONTENT}, KIND=#{KIND} where CALENDARNUM=#{CALENDARNUM} -->
<!-- 	</update> -->
	<!-- 일정 삭제 -->
<!-- 	<delete id="delete" parameterType="CalendarVO"> -->
<!-- 	delete from CALENDAR where CALENDARNUM=#{CALENDARNUM} -->
<!-- 	</delete> -->
	<mapper namespace="calendar">
	<select id="seletOne" parameterType="com.group.calendar.vo.Calendar_Vo"
		resultType="com.group.calendar.vo.Calendar_Vo">
		select * from calendar where calendar_no =#{calendar_no}
	</select>
	<select id="seletList" parameterType="string" resultType="com.group.calendar.vo.Calendar_Vo">
		select calendar_no,calendar_start,calendar_end,calendar_title,calendar_color from calendar
		where CALENDAR_REGID=#{id} or CALENDAR_REGID ='admin'
	</select>
	<insert id="insert" parameterType="java.util.Map">
		INSERT INTO calendar (
		calendar_no,
		calendar_regid,
		calendar_start,
		calendar_end,
		calendar_title,
		calendar_cont,
		calendar_remark,
		calendar_color
		)
		SELECT PK_CALENDAR_NO.NEXTVAl, A.*
		FROM (
		<foreach collection="list" item="item" index="ix" separator="UNION ALL">
			SELECT
			#{item.calendar_regid,jdbcType=VARCHAR},
			#{item.calendar_start,jdbcType=VARCHAR},
			#{item.calendar_end,jdbcType=VARCHAR},
			#{item.calendar_title,jdbcType=VARCHAR},
			#{item.calendar_cont,jdbcType=VARCHAR},
			#{item.calendar_remark,jdbcType=VARCHAR},
			#{item.calendar_color}
			FROM DUAL
		</foreach>
		) A

	</insert>
	<update id="update" parameterType="com.group.calendar.vo.Calendar_Vo">
	update calendar set
		calendar_start =#{calendar_start},
		calendar_end=#{calendar_end},
		calendar_cont=#{calendar_cont},
		calendar_remark=#{calendar_remark},
		calendar_color=#{calendar_color}
    where calendar_no =#{calendar_no}
	</update>
	<delete id="delete" parameterType="com.group.calendar.vo.Calendar_Vo">
	delete from calendar where calendar_no =#{calendar_no}
	</delete>
	<select id="dayList" parameterType="com.group.calendar.vo.Calendar_Vo" resultType="com.group.calendar.vo.Calendar_Vo">
	select * FROM CALENDAR
	where 
  	CALENDAR_REGID=#{calendar_regid}
	and #{calendar_regdate} between CALENDAR_START and CALENDAR_END
	
	
	</select>
</mapper>

<!-- 다른 테이블 쿼리문은 이 파일 복붙해서 쓰기 -->